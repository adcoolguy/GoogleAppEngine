#! /usr/bin/env bash

#Need to create soft link to your GAEJ home e.g.
#ln -s /Users/ag/appengine-java-sdk-1.5.1 /appengine-java-sdk
#ln -s '/Users/ag/Workspaces/Eclipse 3.7 Java' /eclipse_home
#ln -s /Users/ag/google_appengine /google_appengine

#Also need to make sure Java is installed properly, generally available at /usr/bin/java and 
#change JAVA_HOME accordingly

export JAVA_HOME='/System/Library/Frameworks/JavaVM.framework/Home'
export GAE_JAVA_SDK_HOME='/appengine-java-sdk'
export GAE_PYTHON_SDK_HOME='/google_appengine'
PROJECT_HOME='/eclipse_home'
#http://code.google.com/appengine/docs/python/tools/uploadingdata.html#Downloading_and_Uploading_All_Data
#Genre,MovieID,CatalogNo,UPC,Title
#set .mode csv and .output xmm.csv.tmp in sqlite3 and iconv -f iso-8859-1 -t utf-8 xmm.csv.tmp > xmm.csv
#Do not forget to add "import_transform: transform.create_foreign_key('Kind', key_is_id=True)"
#based on http://stackoverflow.com/questions/3129286/google-app-engine-bulkloader-problem-when-using-yaml-autogenerated-configuration/5782403#5782403
# ********************************************************************************************************************************************
# DO NOT FORGET TO CHANGE remove the __key__ or id property before upload and change bulkloader1.yaml to bulkloader.yaml!!!
# Also need to make sure that your datastore properties ARE THE SAME as the one specified in .yaml (like there SHOULD NOT BE ANY MISSING properties observed using Data Viewer)
# And DO NOT REMEMBER to add csv fix (http://stackoverflow.com/questions/5973363/bulkloader-csv-size-error)
# ********************************************************************************************************************************************
#/google_appengine/appcfg.py upload_data --dry_run --application=cloud-service-api --config_file=bulkloader.yaml --filename=download_kind_ServiceRegistry1.csv --kind=ServiceRegistry --url=http://cloud-service-api.appspot.com/remote_api
#/google_appengine/appcfg.py upload_data --config_file=bulkloader.yaml --filename=download_kind_ServiceRegistry.csv --kind=ServiceRegistry --url=http://cloud-service-api.appspot.com/remote_api
/google_appengine/appcfg.py upload_data --config_file=bulkloader.yaml --filename=download_kind_ServiceRegistry.csv --kind=ServiceRegistry --url=http://cloudaware.appspot.com/remote_api

#/google_appengine/appcfg.py upload_data --dry_run --application=cloud-service-api --config_file=bulkloader.yaml --filename=download_kind_Huma.csv --kind=Huma --url=http://cloud-service-api.appspot.com/remote_api
#/google_appengine/appcfg.py upload_data --config_file=bulkloader.yaml --filename=download_kind_Huma.csv --kind=Huma --url=http://cloud-service-api.appspot.com/remote_api
#/google_appengine/appcfg.py upload_data --config_file=bulkloader.yaml --filename=download_kind_Geniu.csv --kind=Geniu --url=http://cloud-service-api.appspot.com/remote_api
#/google_appengine/appcfg.py upload_data --config_file=bulkloader.yaml --filename=download_kind_Secure.csv --kind=Secure --url=http://cloud-service-api.appspot.com/remote_api
rm bulkloader-log*
rm bulkloader-progress*